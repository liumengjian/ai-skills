# 九、弹窗（Modal）规范

- 创建 / 编辑场景：

  - **允许使用**：可以使用 `<Modal>` 组件标签形式

  - **静态方法使用规范**：禁止直接使用 `antd/Modal` 的静态方法（如 `Modal.confirm`、`Modal.info` 等），必须通过 `InjectContext` 的 `context.modal` 使用。详细规范请参考 [`chapters/03-项目页面结构.md`](../chapters/03-项目页面结构.md)"`InjectContext` 使用规范"部分。

  - **最大高度限制**：所有弹窗的最大高度不能超过窗口高度的 `100vh - 200px`，必须通过 `styles.body` 设置 `maxHeight: 'calc(100vh - 200px)'`。

  - 内部表单使用 `antd/Form`

- **使用示例**：
  ```javascript
  import React, { useContext, useState } from 'react';
  import { Modal, Form, Input } from 'antd';
  import { InjectContext } from '~/enumerate/context';

  function UserList({ user, createUserAction }) {
    const context = useContext(InjectContext);
    const [form] = Form.useForm();
    const [modalOpen, setModalOpen] = useState(false);

    // 方式一：使用 <Modal> 组件标签（推荐）
    const handleCreate = () => {
      setModalOpen(true);
    };

    const handleSubmit = async (values) => {
      await createUserAction(values);
      context.message.success('创建成功！');
      setModalOpen(false);
    };

    return (
      <>
        <button onClick={handleCreate}>新增用户</button>
        {/* ✅ 正确：使用 <Modal> 组件标签 */}
        <Modal
          open={modalOpen}
          title="新增用户"
          onCancel={() => setModalOpen(false)}
          footer={null}
          styles={{
            body: {
              maxHeight: 'calc(100vh - 200px)',
              overflow: 'auto'
            }
          }}
        >
          <Form
            form={form}
            layout="vertical"
            onFinish={handleSubmit}
          >
            <Form.Item name="name" label="用户名">
              <Input placeholder="请输入用户名" allowClear />
            </Form.Item>
            <Form.Item name="email" label="邮箱">
              <Input placeholder="请输入邮箱" allowClear />
            </Form.Item>
          </Form>
        </Modal>
      </>
    );
  }
  ```
