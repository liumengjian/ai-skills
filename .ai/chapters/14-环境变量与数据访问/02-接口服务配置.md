# 十四、环境变量与数据访问

## 2. 接口服务配置

- **接口域名获取**：通过 `process.env.app.API_HOST` 获取应用接口服务域名

- **配置来源**：接口域名配置来源于根目录 `jjb.config.js` 文件中的 `environment` 属性

- **配置结构**：

  ```javascript
  // jjb.config.js
  {
    environment: {
      development: {
        API_HOST: 'https://dev-api.example.com'
      },
      production: {
        API_HOST: 'https://api.example.com'
      }
    }
  }
  ```

- **应用接口环境**：

  - **开发环境接口 HOST**：`http://10.43.250.65`

  - **测试（UAT）环境接口 HOST**：`http://10.43.82.219`

  - **配置示例**：

    ```javascript
    // jjb.config.js
    {
      environment: {
        development: {
          API_HOST: 'http://10.43.250.65'  // 开发环境
        },
        uat: {
          API_HOST: 'http://10.43.82.219'    // 测试（UAT）环境
        },
        production: {
          API_HOST: 'https://api.example.com'  // 生产环境
        }
      }
    }
    ```

- **环境映射机制**：

  - `process.env.app` 对象会根据启动脚本自动映射到对应的环境配置

  - **映射规则**：启动脚本中的环境标识符（如 `development`、`production`）对应 `environment` 对象中的同名键值

  - **示例**：

    - 启动命令：`npm run serve:development` → `process.env.app` 获取 `environment.development` 的配置

    - 启动命令：`npm run serve:production` → `process.env.app` 获取 `environment.production` 的配置

  - **访问方式**：在代码中通过 `process.env.app.API_HOST` 即可访问当前环境对应的接口域名
