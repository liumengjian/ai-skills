# 十、通用业务组件使用规范

### 1. 富文本

- 使用：

  `@cqsjjb/jjb-react-admin-component/Editor`

  必须严格参考对应 MD 文档或 d.ts 文件！不得猜测组件属性！

### 2. 上传 (Uploader)

- **单图上传：**`@cqsjjb/jjb-react-admin-component/ImageUploader`

  必须严格参考对应 MD 文档或 d.ts 文件！不得猜测组件属性！

  - **集成规范**：必须通过 `Form.Item` 的 `getValueProps` 与 `getValueFromEvent` 属性实现数据的双向绑定与转换。

  - **实现逻辑**：

    - `getValueProps`：将表单内部的图片 URL 转换为组件所需的格式。

    - `getValueFromEvent`：拦截组件的上传事件，提取接口返回的图片地址并同步至表单状态。

  - **引用路径**：

    ```javascript
    import {
      getValueProps,
      getValueFromEvent,
    } from '@cqsjjb/jjb-react-admin-component/ImageUploader';
    ```

- **多图上传：**`antd/Upload`

  - **文件上传：**

    - 字段名：file

    - 上传地址：

      `{window.process.env.app.API_HOST}/attachment/files/upload-speed-simple`

    - 请求头：

      `sessionStorage.getItem('token')`

  - **数据清洗规范**：在表单提交前，必须对 `fileList` 进行预处理。

  - **字段约束**：仅提取文件访问地址，通常取值为 `fileList[x].response.fileUrl`。

- **单附件上传：**`@cqsjjb/jjb-react-admin-component/FileUploader`

  必须严格参考对应 MD 文档或 d.ts 文件！不得猜测组件属性！

  - **集成规范**：同 `ImageUploader`，需配置 `Form.Item` 的数据转换钩子。

  - **引用路径**：

    ```javascript
    import {
      getValueProps,
      getValueFromEvent,
    } from '@cqsjjb/jjb-react-admin-component/FileUploader';
    ```

- **多附件上传：**`antd/Upload`

  - **文件上传：**

    - 字段名：file

    - 上传地址：

      `{window.process.env.app.API_HOST}/attachment/files/upload-speed-simple`

    - 请求头：

      `sessionStorage.getItem('token')`

  - **数据清洗规范**：在表单提交前，必须对 `fileList` 进行预处理。

  - **字段约束**：仅提取文件访问地址，通常取值为 `fileList[x].response.fileUrl`。

### 3. 图片裁剪

- 使用：

  `@cqsjjb/jjb-react-admin-component/ImageCropper`

  必须严格参考对应 MD 文档或 d.ts 文件！不得猜测组件属性！

### 4. 地图

- 使用：

  `@cqsjjb/jjb-react-admin-component/AMap`

  必须严格参考对应 MD 文档或 d.ts 文件！不得猜测组件属性！
