# 一、技术栈与基础

### 1. 技术栈

- React 18 + JSX

- antd v5

- less

- 状态与运行时：@cqsjjb/jjb-dva-runtime（基于 dvajs）

### 2. 基础组件库

- **业务组件库**：@cqsjjb/jjb-react-admin-component

  - 提供企业级后台管理系统所需的业务组件，包括页面布局、表单、表格、上传等组件

  - 主要组件：`PageLayout`、`SearchForm`、`TableAction`、`Editor`、`ImageUploader`、`FileUploader`、`ImageCropper`、`AMap` 等

  - 使用规范：必须严格参考对应 MD 文档或 d.ts 文件，不得猜测组件属性

- **通用工具库**：@cqsjjb/jjb-common-lib

  - 提供基础工具函数、HTTP 请求、加解密、颜色值等通用功能模块

#### 2.1 @cqsjjb/jjb-common-lib 主要模块

`@cqsjjb/jjb-common-lib` 包含以下主要模块：

- **tools 模块**：包含大量基础工具函数，开发时应优先使用工具库中的工具，避免重复造轮子

  - 使用建议：在实现功能前，应先查找 `tools` 模块中是否有对应的工具函数

  - 导入方式：`import { tools } from '@cqsjjb/jjb-common-lib';`

- **http 模块**：基于 axios 高度封装的请求库，专为微应用场景设计

  - 核心作用：`declareRequest` 的接口请求就是基于此模块实现

  - 导入方式：`import { http } from '@cqsjjb/jjb-common-lib';`

- **qs 模块**：一个简化的 querystring 模块

  - 核心作用：`tools.router` 的核心技术基于此 `qs` 模块实现

  - 导入方式：`import { qs } from '@cqsjjb/jjb-common-lib';`

- **crypto 模块**：基于 cryptojs 实现的简化加解密模块

  - 内置方法：

    - `AES_128_Encrypt`：AES-128 加密

    - `AES_128_Decrypt`：AES-128 解密

    - `MD5`：MD5 哈希

  - 导入方式：`import { crypto } from '@cqsjjb/jjb-common-lib';`

- **color 模块**：包含大量颜色值

  - 导入方式：`import { color } from '@cqsjjb/jjb-common-lib';`

### 3. 全局运行时规范

- 所有后台应用 **必须** 使用 `@cqsjjb/jjb-dva-runtime` 作为应用运行时

- 实现能力：

  - 自动化路由注册

  - 自动化 model 注册

  - 接口 loading / 状态统一管理

### 4. 图片布局约束

- **图片生成代码规范**：当用户上传图片并根据图片生成代码时，**必须** 严格执行图片中的布局结构。

- **布局分析要求**：

  - **仔细分析**：必须仔细分析图片中的布局结构，包括但不限于：

    - 组件的位置关系（上下、左右、嵌套等）

    - 组件的尺寸比例和间距

    - 组件的对齐方式

    - 组件的排列顺序

    - 组件的视觉层次

  - **严格执行**：生成的代码必须严格按照图片中的布局结构实现，不得自行调整或优化布局。

  - **布局还原**：确保生成的页面布局与图片中的布局结构完全一致。

### 5. 代码检查与调整规范

- **最终检查要求**：代码生成完成后，**必须** 最后检查生成的代码是否符合手册要求。

- **检查与调整流程**：

  - **逐项检查**：对照手册中的各项规范要求，逐项检查生成的代码是否符合要求。

  - **不符合则调整**：如发现不符合手册要求的地方，**必须** 立即进行调整。

  - **循环调整**：调整后再次检查，如仍不符合要求，继续调整，**直到完全符合手册要求为止**。

  - **确保合规**：最终交付的代码必须完全符合本手册的所有规范要求。
